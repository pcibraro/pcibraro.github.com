
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Integrating the WCF trace with the Logging Application Block - Pablo Cibraro (Cibrax)</title>
  <meta name="author" content="Cibrax">

  
  <meta name="description" content="As part of the integration between WCF and EntLib 3.0, this last one
comes with a nice feature to redirect the WCF trace to the logging
application &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cibrax.me/blog/2007/06/18/integrating-the-wcf-trace-with-the-logging-application-block">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/cibrax" rel="alternate" title="Pablo Cibraro (Cibrax)" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44468149-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Pablo Cibraro (Cibrax)</a></h1>
  
    <h2>All about software development.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/cibrax" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cibrax.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Integrating the WCF Trace With the Logging Application Block</h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-06-18T00:00:00-03:00" pubdate data-updated="true">Jun 18<span>th</span>, 2007</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>As part of the integration between WCF and EntLib 3.0, this last one
comes with a nice feature to redirect the WCF trace to the logging
application block. This is done by Entlib through a custom trace
listener (system.diagnostics) that captures the trace generated by WCF,
and then, transfer that trace to any of the EntLib&rsquo;s trace listeners
(Logging application block) configured in the application.</p>

<p>The image below illustrates the approach used by EntLib.</p>

<p> </p>

<p><img src="/images/legacy/Logging.gif" alt="" />\</p>

<p>The fact of executing an extra component to transfer the trace messages
and the logging application block itself will add some overhead to
the overall solution by sure. On the other hand, we can use many of the
available features in the logging application block, such as formatters,
filters and trace listeners. Regarding the trace listeners, they will
allow us to store the trace in different storages, like databases, msmq
and files to name a few. Since we can actually do the same with a custom
trace listener in system.diagnostics, the real benefit here is that we
can leverage one of listeners provided in EntLib without needing to
write one from the scratch or centralize the application trace and WCF
trace just in one place.</p>

<p>If want to still use the trace viewer tool provided in WCF
(svctraceviewer.exe), the bad news is that this tool only supports xml
files (It would be great to have a plugging architecture here to read
the trace information from any storage). Therefore, we will have to
store the trace in a valid xml format, and then build something to dump
the trace to a xml file. Entlib comes with a trace listener
XmlTraceListener that generates a xml file with the format expected by
the svctraceviewer.exe tool.\</p>

<p>The EntLib&rsquo;s trace listener to redirect the trace messages the Logging
application block can be configured as follow</p>

<p>&lt;system.diagnostics></p>

<p>        &lt;sharedListeners></p>

<p>            &lt;add name=&ldquo;EntLibListener&rdquo;
type=&ldquo;Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.EntLibLoggingProxyTraceListener,
Microsoft.Practices.EnterpriseLibrary.Logging&rdquo;/></p>

<p>        &lt;/sharedListeners></p>

<p>        &lt;sources></p>

<p>            &lt;source name=&ldquo;System.ServiceModel&rdquo;
switchValue=&ldquo;Information, ActivityTracing&rdquo; propagateActivity=&ldquo;true&rdquo;></p>

<p>                &lt;listeners></p>

<p>                    &lt;add name=&ldquo;EntLibListener&rdquo;/></p>

<p>                &lt;/listeners></p>

<p>            &lt;/source></p>

<p>        &lt;/sources></p>

<p> &lt;/system.diagnostics></p>

<p>For this post, I will demostrate how to configure the XmlTraceListener
that comes out of the box to generate the file expected by the trace
viewer tool.</p>

<p>&lt;loggingConfiguration name=&ldquo;Logging Application Block&rdquo;
tracingEnabled=&ldquo;true&rdquo;</p>

<p>    defaultCategory=&ldquo;General&rdquo; logWarningsWhenNoCategoriesMatch=&ldquo;true&rdquo;></p>

<p>    &lt;listeners></p>

<p>        &lt;add fileName=&ldquo;trace-xml.xml&rdquo;
listenerDataType=&ldquo;Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.XmlTraceListenerData,
Microsoft.Practices.EnterpriseLibrary.Logging&rdquo;</p>

<p>        traceOutputOptions=&ldquo;None&rdquo;
type=&ldquo;Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.XmlTraceListener,
Microsoft.Practices.EnterpriseLibrary.Logging&rdquo;</p>

<p>        name=&ldquo;XML Trace Listener&rdquo; /></p>

<p> </p>

<p>    &lt;/listeners></p>

<p>    &lt;formatters></p>

<p>    &lt;/formatters></p>

<p>    &lt;categorySources></p>

<p>        &lt;add switchValue=&ldquo;All&rdquo; name=&ldquo;System.ServiceModel&rdquo;></p>

<p>            &lt;listeners></p>

<p>                &lt;add name=&ldquo;XML Trace Listener&rdquo; /></p>

<p>            &lt;/listeners></p>

<p>        &lt;/add></p>

<p> </p>

<p>    &lt;/categorySources></p>

<p>    &lt;specialSources></p>

<p>        &lt;allEvents switchValue=&ldquo;All&rdquo; name=&ldquo;All Events&rdquo; /></p>

<p>        &lt;notProcessed switchValue=&ldquo;All&rdquo; name=&ldquo;Unprocessed Category&rdquo; /></p>

<p>        &lt;errors switchValue=&ldquo;All&rdquo; name=&ldquo;Logging Errors &amp; Warnings&rdquo;
/></p>

<p>    &lt;/specialSources></p>

<p> </p>

<p>&lt;/loggingConfiguration></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Cibrax</span></span>

      








  


<time datetime="2007-06-18T00:00:00-03:00" pubdate data-updated="true">Jun 18<span>th</span>, 2007</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/dot-net/'>.NET</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://cibrax.me/blog/2007/06/18/integrating-the-wcf-trace-with-the-logging-application-block/" data-via="cibrax" data-counturl="http://cibrax.me/blog/2007/06/18/integrating-the-wcf-trace-with-the-logging-application-block/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2007/06/10/asmx-wcf-migration-rest-pox-articles/" title="Previous Post: ASMX/WCF Migration - REST/POX Articles">&laquo; ASMX/WCF Migration - REST/POX Articles</a>
      
      
        <a class="basic-alignment right" href="/blog/2007/06/18/wcf-durable-services/" title="Next Post: WCF Durable services">WCF Durable services &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/20/do-not-version-urls/">Do Not Version Urls</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/23/selfhost-utilities/">SelfHost Utilities</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/23/appfabric-outputcaching/">AppFabric OutputCaching</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/31/making-ajax-calls-with-hawk-authentication-to-asp-dot-net-web-api/">Making Ajax Calls With Hawk Authentication to ASP.NET Web API</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/13/coordinating-async-work-in-node-dot-js/">Coordinating Async Work in Node.js</a>
      </li>
    
  </ul>
</section>
 <a href="http://feeds.feedburner.com/cibrax"><img src="http://feeds.feedburner.com/~fc/cibrax?bg=FF3300&amp;fg=000000&amp;anim=0" style="border:0" alt="" /></a>

 <script type="text/javascript" language="javascript" src="http://twittercounter.com/embed/?username=cibrax&style=white"></script>
<a href="https://mvp.microsoft.com/en-us/mvp/Pablo%20Cibraro-33800"><img src="/images/mvp.gif" border="0" /></a>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pcibraro">@pcibraro</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pcibraro',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Cibrax -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'cibrax';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://cibrax.me/blog/2007/06/18/integrating-the-wcf-trace-with-the-logging-application-block/';
        var disqus_url = 'http://cibrax.me/blog/2007/06/18/integrating-the-wcf-trace-with-the-logging-application-block/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
