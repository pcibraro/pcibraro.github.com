
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Pablo Cibraro (Cibrax)</title>
  <meta name="author" content="Cibrax">

  
  <meta name="description" content="Microsoft has released the first CTP of the synchronization framework,
it is available to download
here. The idea of this framework is to provide a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cibrax.me/blog/page/20">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/cibrax" rel="alternate" title="Pablo Cibraro (Cibrax)" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44468149-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Pablo Cibraro (Cibrax)</a></h1>
  
    <h2>All about software development.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/cibrax" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cibrax.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/categories">Categories</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/11/22/microsoft-synchronization-framework-and-sse/">Microsoft Synchronization Framework and SSE</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-22T00:00:00-03:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2007</time>
        
         | <a href="/blog/2007/11/22/microsoft-synchronization-framework-and-sse/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Microsoft has released the first CTP of the synchronization framework,
it is available to download
<a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=35E8F16E-AAA4-4919-8B3C-1CE4EA1F6552">here</a>.</p>

<p>The idea of this framework is to provide a platform or foundation to
synchronize data across multiple data stores through an extensible
architecture based on providers.</p>

<p>This drop comes with three providers out of the box,</p>

<p>​1. Sync provider for ADO.NET, which is the provider for synchronization
across databases  using ADO.NET.</p>

<p>​2. Sync provider for File System, which can be used to synchronize two
file system locations.</p>

<p>​3. Sync provider for SSE (Simple Sharing Extensions) for
synchronization data against SSE feeds. If you are not familiar with
SSE, it is a lightweight protocol initially defined by <a href="http://rayozzie.spaces.live.com/blog/cns!FB3017FBB9B2E142!285.entry">Ray
Ozzie</a>
that mounts on top of RSS or ATOM to allow for two-way synchronization
among peers. If you are interested in knowing more about this
technology, <a href="http://www.clariusconsulting.net/blogs/kzu/archive/2007/06/26/28072.aspx">Daniel wrote an excellent
post</a>
in his blog a couple of weeks ago. As Daniel mentioned in his post, we
have been participating of an open-source implementation of SSE,
<a href="http://www.codeplex.com/sse/Release/ProjectReleases.aspx?ReleaseId=5301">SimpleSharing-NET</a>
that is available to download in CodePlex.</p>

<p>I will be discussing more about the SimpleSharing-NET architecture in
future posts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/10/19/loading-the-wcf-configuration-from-different-files-on-the-client-side/">Loading the WCF Configuration From Different Files on the Client Side</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-19T00:00:00-03:00" pubdate data-updated="true">Oct 19<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/10/19/loading-the-wcf-configuration-from-different-files-on-the-client-side/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A common problem in WCF that many people face is the impossibility of
loading the client configuration from different configuration files.
This is a common scenario  when the developer wants to
deploy some binaries with along with an independent configuration file
(Which may be in a resource file also) to avoid modifying the main
configuration file. A weeks ago, I described a easy workaround to use
the external configuration files through the use of the configSource
attribute (A mechanism provided by .NET). However, that approach
requires several configuration files to configure an entire WCF channel,
at least three files (client section, bindings and behaviors).</p>

<p>Another approach, which is less common and I will describe in this post,
requires some custom code to extend the ChannelFactory&lt;T> class.</p>

<p>The ChannelFactory&lt;T> provides a virtual method &ldquo;CreateDescription&rdquo;
that can be overridden to create a ServiceEndpoint.</p>

<p> </p>

<p>//</p>

<p>// Summary:</p>

<p>//    Creates a description of the service endpoint.</p>

<p>//</p>

<p>// Returns:</p>

<p>//    The System.ServiceModel.Description.ServiceEndpoint of the
service.</p>

<p>//</p>

<p>// Exceptions:</p>

<p>//   System.InvalidOperatorException:</p>

<p>//    The callback contract is null but the service endpoint requires
one that</p>

<p>//    is non-null.</p>

<p>protected override ServiceEndpoint CreateDescription();</p>

<p>The default implementation of this method basically tries to load
the endpoint configuration from the default configuration file (The file
configured for the default AppDomain). So, the workaround here is to
override that method and load the configuration from another file. It
seems to be pretty easy to do at first glance, but as you will see next,
it requires a lot of plumbing code to make it work.</p>

<p>The first step is to derive our custom channel class from the
ChannelFactory&lt;T> class and add an argument in the constructor to
specify a different configuration file.</p>

<p>/// &lt;summary></p>

<p>/// Custom client channel. Allows to specify a different configuration
file</p>

<p>/// &lt;/summary></p>

<p>/// &lt;typeparam name=&ldquo;T&rdquo;>&lt;/typeparam></p>

<p>public class CustomClientChannel&lt;T> : ChannelFactory&lt;T></p>

<p>{</p>

<p>  string configurationPath;</p>

<p> </p>

<p>  /// &lt;summary></p>

<p>  /// Constructor</p>

<p>  /// &lt;/summary></p>

<p>  /// &lt;param name=&ldquo;configurationPath&rdquo;>&lt;/param></p>

<p>  public CustomClientChannel(string configurationPath) : base(typeof(T))</p>

<p>  {</p>

<p>    this.configurationPath = configurationPath;</p>

<p>    base.InitializeEndpoint((string)null, null);</p>

<p>  }</p>

<p>As you can see, a call to the method InitialiazeEndpoint of the base
class is required. That method will automatically call to our
CreateDescription method to configure the service endpoint.</p>

<p>/// &lt;summary></p>

<p>/// Loads the serviceEndpoint description from the specified
configuration file</p>

<p>/// &lt;/summary></p>

<p>/// &lt;returns>&lt;/returns></p>

<p>protected override ServiceEndpoint CreateDescription()</p>

<p>{</p>

<p>   ServiceEndpoint serviceEndpoint = base.CreateDescription();</p>

<p> </p>

<p>   ExeConfigurationFileMap map = new ExeConfigurationFileMap();</p>

<p>   map.ExeConfigFilename = this.configurationPath;</p>

<p> </p>

<p>   Configuration config =
ConfigurationManager.OpenMappedExeConfiguration(map,
ConfigurationUserLevel.None);</p>

<p>   ServiceModelSectionGroup group =
ServiceModelSectionGroup.GetSectionGroup(config);</p>

<p> </p>

<p>   ChannelEndpointElement selectedEndpoint = null;</p>

<p> </p>

<p>   foreach (ChannelEndpointElement endpoint in group.Client.Endpoints)</p>

<p>   {</p>

<p>      if (endpoint.Contract ==
serviceEndpoint.Contract.ConfigurationName)</p>

<p>      {</p>

<p>        selectedEndpoint = endpoint;</p>

<p>        break;</p>

<p>      }</p>

<p>    }</p>

<p> </p>

<p>    if (selectedEndpoint != null)</p>

<p>    {</p>

<p>      if (serviceEndpoint.Binding == null)</p>

<p>      {</p>

<p>        serviceEndpoint.Binding =
CreateBinding(selectedEndpoint.Binding, group);</p>

<p>      }</p>

<p> </p>

<p>      if (serviceEndpoint.Address == null)</p>

<p>      {</p>

<p>        serviceEndpoint.Address = new
EndpointAddress(selectedEndpoint.Address,
GetIdentity(selectedEndpoint.Identity),
selectedEndpoint.Headers.Headers);</p>

<p>      }</p>

<p> </p>

<p>      if (serviceEndpoint.Behaviors.Count == 0 &amp;&amp;
selectedEndpoint.BehaviorConfiguration != null)</p>

<p>      {</p>

<p>        AddBehaviors(selectedEndpoint.BehaviorConfiguration,
serviceEndpoint, group);</p>

<p>      }</p>

<p> </p>

<p>      serviceEndpoint.Name = selectedEndpoint.Contract;</p>

<p>    }</p>

<p> </p>

<p>    return serviceEndpoint;</p>

<p> </p>

<p>}</p>

<p> </p>

<p>CreateDescription is the core method where we create the service
endpoint using the configuration file specified in the constructor
method.</p>

<p>And the last step, is to use our custom channel in the client
application instead of the base channel provided by WCF.</p>

<p>CustomClientChannel&lt;ICalculator> channel = new
CustomClientChannel&lt;ICalculator>(&ldquo;OtherConfig.config&rdquo;);</p>

<p>ICalculator client = channel.CreateChannel();</p>

<p>The code below uses the ICalculator contract  that comes with the WCF
sdk samples.</p>

<p>You can download the <a href="/images/legacy/CustomChannel.zip">complete sample
here</a></p>

<p> </p>

<p> </p>

<p> </p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/10/17/clarius-is-hiring/">Clarius Is Hiring!!!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-17T00:00:00-03:00" pubdate data-updated="true">Oct 17<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/10/17/clarius-is-hiring/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Want to work at a growing, high energy services-software company?
Clarius Consulting is looking for the candidates to help us fill the
following positions:</p>

<p>At Clarius we do all kind of interesting and exciting work. We help
customers get up to speed with .Net by providing superb training,
mentoring and consulting. We also write a lot of code. We present @
several conferences (locally and worldwide) and we write articles and
books.</p>

<p><strong>Senior Software Developers.</strong></p>

<p>The position is based in Buenos Aires, Argentina (Local candidates
only). Selected candidates should possess experience in many of the
following disciplines:</p>

<p>ASP.NET, ADO.NET \
Winforms .NET development (C#, preferably; MDI-based applications) and
Webforms \
XML-related standards \
SQL Server 2000-2005 \
Explicit/Implicit stored procedures. \
Web Services / .NET remoting / WCF\
COM+ / .NET interoperability \
Migration from COM+ to .NET</p>

<p>If you are interested, drop me a line with your resume (pci at
clariusconsulting DOT net)</p>

<p>Thanks!!!.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/10/08/certificate-access-error-for-wcf-hosted-services/">Certificate Access Error for WCF Hosted Services</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-08T00:00:00-03:00" pubdate data-updated="true">Oct 8<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/10/08/certificate-access-error-for-wcf-hosted-services/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>The problem appears when a WCF Service hosted in an IIS tries to load a
certificate from the Windows Certificates Store with the account of the
Application Pool where the service runs, and the account’s profile is
not previously loaded. When a user logs on interactively, the system
automatically loads the user&rsquo;s profile. If a service or an application
impersonates a user, the system does not load the user&rsquo;s profile.
Therefore, the service or application should load the user&rsquo;s profile
with LoadUserProfile.</em></p>

<p><em>When this happens the operation throws the following exception:</em></p>

<p><em>System.Security.Cryptography.CryptographicException: The system cannot
find the file specified. [VIA <a href="http://marianosz.blogspot.com/">Mariano Sanches
Blog</a>]</em></p>

<p> </p>

<p>The problem is basically related to the method that WCF uses to encrypt
the Secure conversation cookie. By default, WCF encrypts the cookie
using DPAPI (Current User), so the user profile should be loaded in
order to use that encryption method.</p>

<p>Mariano mentioned one of the workarounds, which requires to load
the user&rsquo;s profile of the account configured in the IIS Application pool
using some windows API&rsquo;s.</p>

<p>Another workaround is to change the method used by WCF to encrypt
the SCT cookie and eliminate the DPAPI dependency. An advantage of this
method is that it works fine for Web Farm scenarios.</p>

<p>Fortunately, WCF provides an extension to change the method used to
encrypt and serialize the SCT Cookie. This extension is a
SecurityStateEncoder and it can be plugged-in by code in the service
host:</p>

<p><strong>serviceHost.Credentials.SecureConversationAuthentication.SecurityStateEncoder</strong></p>

<p>You can find an excellent example about how to implement a custom
SecurityStateEncoder
<a href="http://wcf.netfx3.com/files/folders/authorization/entry11436.aspx">here</a>,
(WCF.Netfx3.com web site, WS-SC With State Encoder)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/10/03/nulltransport-for-wcf/">NullTransport for WCF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-03T00:00:00-03:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2007</time>
        
         | <a href="/blog/2007/10/03/nulltransport-for-wcf/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As usual, Roman Kiss continues doing great stuffs for WCF. He has
recently published a new NullTransport for WCF in CodeProject.</p>

<p>This transport is really useful for In-Process communication when the
client and the service run on the same windows process. Before having
this transport, the recommended transport for scenario was Named pipes.</p>

<p>Read more about this transport in the article he published here
<a href="http://www.codeproject.com/WCF/NullTransportForWCF.asp">http://www.codeproject.com/WCF/NullTransportForWCF.asp</a></p>

<p>Enjoy!!.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/08/29/sending-attachments-with-wcf/">Sending Attachments With WCF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-08-29T00:00:00-03:00" pubdate data-updated="true">Aug 29<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/08/29/sending-attachments-with-wcf/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>WCF mainly supports two modes to send attachments in a efficient way, an
streamed mode and a buffered/chunked mode.</p>

<p>In the first mode, the transport basically transfers large amount of
data using small buffers with a minimal overhead. This mode of
transferring the data has some drawbacks, for instance it does not
support message security (Only transport security through SSL), or the
robustness of reliable messaging. On the other hand, interoperability is
easier to archive since no WS-* standard is used. Nicholas describes
the restrictions very well on this post,
<a href="http://blogs.msdn.com/drnick/archive/2006/03/31/565558.aspx">http://blogs.msdn.com/drnick/archive/2006/03/31/565558.aspx</a></p>

<p>I will show a simple example that uses the Streamed mode to upload a
file to the server. The contract for this service looks as follow:</p>

<p>[ServiceContract()]</p>

<p>public interface IFileTransferService</p>

<p>{</p>

<p>  [OperationContract(IsOneWay = true)]</p>

<p>  void Upload(FileTransferRequest request);</p>

<p>}</p>

<p>As Nicholas mentioned on his post, when this mode is used, only the
stream object can go in the message body, the rest of the arguments must
go as headers. That is the main reason of using a message contract
FileTransferRequest.</p>

<p>[MessageContract()]</p>

<p>public class FileTransferRequest</p>

<p>{</p>

<p>  [MessageHeader(MustUnderstand = true)]</p>

<p>  public string FileName;</p>

<p> </p>

<p>  [MessageBodyMember(Order = 1)]</p>

<p>  public System.IO.Stream Data;</p>

<p> </p>

<p>}</p>

<p>Processing large files with buffered transfer does not scale well, and
could be something impossible to do because of the high memory
requeriments on the client and server side. The workaround for this is
chunking combined with reliable messaging, which basically split large
files in small fragments (For instance, 64 o 128 KB fragments) and use
reliable messaging to assure the ordered delivery of those fragments.
WCF does not provide a transport with chunk support by default, but
fortunately it is implemented in an example of the SDK.</p>

<p>This simple is under the folder [SDK
folder]\Samples\Extensibility\Channels\ChunkingChannel</p>

<p>In addition to the mode used to transfer the streams, WCF also supports
the concept of message encoders, which basically serializes a
xml infoset into a stream of bytes using an specific encoding. WCF ships
by default with three encoders, Text, Binary and MTOM. Any of
the features provided by these encoders should be considered carefully
to avoid performance issues in the application.</p>

<p>The Text and MTOM encoders provides interoperability with other
platforms while the Binary formatter uses a proprietary format. Anyway,
let&rsquo;s discuss these types of encoder more in detail:</p>

<p><strong>Text Encoder</strong>: As it name says, it is a text message encoder and
supports both plain XML encoding (For Rest/POST scenarios) as well as
SOAP Encoding. When this encoder is used, the attachments are encoded as
base64 and added as part of the xml message. This transformation to a
base64 encoding makes the final size of the attachments bigger, almost
30% bigger than the original size.</p>

<p><strong>Binary Encoder</strong>: It uses a compact binary format, optimized for a WCF
to WCF communication. This encoder is the recommend one for sending
attachments when interoperability is not a requirement.</p>

<p><strong>MTOM Encoder</strong>:  It uses a Message Transmission Optimization Mechanism
(MTOM) encoding. MTOM is a efficient technology for transmitting large
blocks of binary data in a soap message as-is, without conversion to
text. In addition, MTOM is a interoperable standard and also supports
Message Security (WS-Security). When Message Security is used, WCF
basically performs the following steps:</p>

<p>​1. Encodes all the blocks of binary data as Base64.</p>

<p>​2. Applies message security (Integrity and Confidentiality) to the
resulting block of Base64 text.</p>

<p>​3. Adds the security headers to the soap message</p>

<p>​4. Transmits the binary data separately from the soap message (The
Base64 data created in the step 2 is discarded)</p>

<p>For more details about moving large amounts of data and final
recommendations, see this <a href="http://blogs.msdn.com/yassers/archive/2006/01/21/515887.aspx">excellent
post</a>
of <a href="http://blogs.msdn.com/yassers/">Yasser Shohoud</a>.</p>

<p>Examples,</p>

<p><a href="/images/legacy/BufferedUpload.zip">Buffered Upload</a></p>

<p><a href="/images/legacy/StreamedUpload.zip">Streamed Upload</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/08/21/removing-the-svc-extension-for-wcf-services/">Removing the SVC Extension for WCF Services</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-08-21T00:00:00-03:00" pubdate data-updated="true">Aug 21<span>st</span>, 2007</time>
        
         | <a href="/blog/2007/08/21/removing-the-svc-extension-for-wcf-services/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Nice Idea!!!, how to remove the svc extension for WCF services hosted in
IIS. [Via <a href="http://www.masteringbiztalk.com/blogs/jon/">John Flander</a>],
<a href="http://www.masteringbiztalk.com/blogs/jon/PermaLink,guid,9e0d8d1e-ac7c-49b5-8072-bde42609f5db.aspx">http://www.masteringbiztalk.com/blogs/jon/PermaLink,guid,9e0d8d1e-ac7c-49b5-8072-bde42609f5db.aspx</a></p>

<p>Using that approach, a service previously published
on <a href="http://myhost/MyService.svc">http://MyHost/MyService.svc</a> can now be
consumed with <a href="http://myhost/MyService">http://MyHost/MyService</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/07/24/configsource-attribute-on-system-servicemodel-section/">ConfigSource Attribute on system.serviceModel Section</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-07-24T00:00:00-03:00" pubdate data-updated="true">Jul 24<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/07/24/configsource-attribute-on-system-servicemodel-section/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The configSource attribute was firstly introduced in .NET framework 2.0
to support external configuration files.</p>

<p>This attribute can be added to any configuration section to specify a an
external file for that section. Using an external configuration source
can be useful in many scenarios. For instance, you could place a section
into an external configSource if you need an easy method to swap
settings for the section depending on the environment (development,
test, or production), or  you need granular control over permissions.</p>

<p>Unfortunately, the system.serviceModel section group does not support
this attribute. If you try to add it, you will receive the following
exception:</p>

<p><strong><em>The attribute &lsquo;configSource&rsquo; cannot be specified because its name
starts with the reserved prefix &lsquo;config&rsquo; or &lsquo;lock&rsquo;</em></strong></p>

<p>What I found out is that you can use this attribute on the different
sections under system.serviceModel such as services, behaviors or
bindings.</p>

<p>For instance, the configuration file could look like this,</p>

<p>&lt;configuration></p>

<p> </p>

<p>  &lt;system.serviceModel></p>

<p>    &lt;services configSource=&ldquo;Services.config&rdquo; ></p>

<p>    &lt;/services></p>

<p> </p>

<p>    &lt;bindings configSource=&ldquo;Bindings.config&rdquo;></p>

<p>    &lt;/bindings></p>

<p> </p>

<p>    &lt;behaviors configSource=&ldquo;Behaviors.config&rdquo;></p>

<p>    &lt;/behaviors></p>

<p> </p>

<p>  &lt;/system.serviceModel></p>

<p> </p>

<p>&lt;/configuration></p>

<p> And then, each file contains the corresponding section.</p>

<p><strong>Services.config</strong></p>

<p>&lt;services></p>

<p>  &lt;service name=&ldquo;Microsoft.ServiceModel.Samples.CalculatorService&rdquo;</p>

<p>          behaviorConfiguration=&ldquo;CalculatorServiceBehavior&rdquo;></p>

<p>    &lt;host></p>

<p>      &lt;baseAddresses></p>

<p>        &lt;add
baseAddress=&ldquo;<a href="http://localhost:8000/servicemodelsamples/service">http://localhost:8000/servicemodelsamples/service</a>&rdquo;/></p>

<p>      &lt;/baseAddresses></p>

<p>    &lt;/host></p>

<p>    &lt;!&mdash; this endpoint is exposed at:
net.tcp://localhost:9000/servicemodelsamples/service  &mdash;></p>

<p>    &lt;endpoint
address=&ldquo;net.tcp://localhost:9000/servicemodelsamples/service&rdquo;</p>

<p>              binding=&ldquo;netTcpBinding&rdquo;</p>

<p>              bindingConfiguration=&ldquo;Binding1&rdquo;</p>

<p>              contract=&ldquo;Microsoft.ServiceModel.Samples.ICalculator&rdquo; /></p>

<p>    &lt;!&mdash; the mex endpoint is exposed at
<a href="http://localhost:8000/ServiceModelSamples/service/mex">http://localhost:8000/ServiceModelSamples/service/mex</a> &mdash;></p>

<p>    &lt;endpoint address=&ldquo;mex&rdquo;</p>

<p>              binding=&ldquo;mexHttpBinding&rdquo;</p>

<p>              contract=&ldquo;IMetadataExchange&rdquo; /></p>

<p>  &lt;/service></p>

<p>&lt;/services></p>

<p><strong>Bindings.config</strong></p>

<p>&lt;bindings></p>

<p>  &lt;netTcpBinding></p>

<p>    &lt;binding name=&ldquo;Binding1&rdquo;</p>

<p>            closeTimeout=&ldquo;00:01:00&rdquo;</p>

<p>            openTimeout=&ldquo;00:01:00&rdquo;</p>

<p>            receiveTimeout=&ldquo;00:10:00&rdquo;</p>

<p>            sendTimeout=&ldquo;00:01:00&rdquo;</p>

<p>            transactionFlow=&ldquo;false&rdquo;</p>

<p>            transferMode=&ldquo;Buffered&rdquo;</p>

<p>            transactionProtocol=&ldquo;OleTransactions&rdquo;</p>

<p>            hostNameComparisonMode=&ldquo;StrongWildcard&rdquo;</p>

<p>            listenBacklog=&ldquo;10&rdquo;</p>

<p>            maxBufferPoolSize=&ldquo;524288&rdquo;</p>

<p>            maxBufferSize=&ldquo;65536&rdquo;</p>

<p>            maxConnections=&ldquo;10&rdquo;</p>

<p>            maxReceivedMessageSize=&ldquo;65536&rdquo;></p>

<p>      &lt;readerQuotas maxDepth=&ldquo;32&rdquo;</p>

<p>                    maxStringContentLength=&ldquo;8192&rdquo;</p>

<p>                    maxArrayLength=&ldquo;16384&rdquo;</p>

<p>                    maxBytesPerRead=&ldquo;4096&rdquo;</p>

<p>                    maxNameTableCharCount=&ldquo;16384&rdquo; /></p>

<p>      &lt;reliableSession ordered=&ldquo;true&rdquo;</p>

<p>                      inactivityTimeout=&ldquo;00:10:00&rdquo;</p>

<p>                      enabled=&ldquo;false&rdquo; /></p>

<p>      &lt;security mode=&ldquo;Transport&rdquo;></p>

<p>        &lt;transport clientCredentialType=&ldquo;Windows&rdquo;
protectionLevel=&ldquo;EncryptAndSign&rdquo; /></p>

<p>      &lt;/security></p>

<p>    &lt;/binding></p>

<p>  &lt;/netTcpBinding></p>

<p>&lt;/bindings></p>

<p><strong>Behaviors.config</strong></p>

<p>&lt;behaviors></p>

<p>  &lt;serviceBehaviors></p>

<p>    &lt;behavior name=&ldquo;CalculatorServiceBehavior&rdquo;></p>

<p>      &lt;serviceMetadata httpGetEnabled=&ldquo;true&rdquo; /></p>

<p>      &lt;serviceDebug includeExceptionDetailInFaults=&ldquo;False&rdquo; /></p>

<p>    &lt;/behavior></p>

<p>  &lt;/serviceBehaviors></p>

<p>&lt;/behaviors></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/07/23/microsoft-sharedview-beta/">Microsoft SharedView Beta</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-07-23T00:00:00-03:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2007</time>
        
         | <a href="/blog/2007/07/23/microsoft-sharedview-beta/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you haven&rsquo;t taken a look yet, Microsoft SharedView is a fast and easy
way to share documents and screen views with small groups of friends or
coworkers; anytime, anywhere, and what is most important, it is
completely free. This version is available up to 15 people in different
locations.</p>

<p>Although it is still in beta version, I have been using this product for
a while to show the progress of my work to other off-site teams, and it
works pretty well with a standard internet connection.</p>

<p>If you want to try it, it is
available <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=ddbf048d-db67-4c56-9335-6964e15975d2&amp;DisplayLang=en">here</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/07/03/wmi-support-in-wcf/">WMI Support in WCF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-07-03T00:00:00-03:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2007</time>
        
         | <a href="/blog/2007/07/03/wmi-support-in-wcf/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A nice thing about the management layer in WCF is the WMI support to
expose instrumentation at runtime with a well-know interface. That
instrumentation includes different service characteristics such as
contracts, services, behaviors, listeners or application hosts, which
can be accessed by different management tools.</p>

<p>The built-in provider can be activated in the configuration file of the
application through the &ldquo;wmiProviderEnabled&rdquo; attribute in the
diagnostics element, as it is shown below,</p>

<p>&lt;system.serviceModel></p>

<p>    &lt;diagnostics <strong>wmiProviderEnabled=&ldquo;true&rdquo;</strong>></p>

<p> </p>

<p>      &lt;messageLogging logEntireMessage=&ldquo;false&rdquo;
logMalformedMessages=&ldquo;false&rdquo; logMessagesAtTransportLevel=&ldquo;false&rdquo;
logMessagesAtServiceLevel=&ldquo;false&rdquo;/></p>

<p>    &lt;/diagnostics></p>

<p>    &hellip;&hellip;&hellip;..</p>

<p>&lt;/system.serviceModel></p>

<p>Of course, this can be also be done through the SvcConfigEditor tool,
which is the way I usually use for simplicity.</p>

<p>Once the WMI provider is enabled, and the service host is running, we
will able to use a tool like <a href="http://www.microsoft.com/downloads/details.aspx?familyid=6430F853-1120-48DB-8CC5-F2ABDC3ED314&amp;displaylang=en">WMI Object
Browser</a> to
see the published information.</p>

<p><img src="/images/legacy/WMI%20Object%20Browser.jpg" alt="" /></p>

<p>As is shown in the image above, if we browse to the objects in the
namespace &ldquo;root\ServiceModel&rdquo;, we will able to see an AppDomainInfo
object with information about the WCF settings, and the service
endpoints as well.</p>

<p>Also we can change some of those settings at runtime (These changes will
not be saved in the configuration), for instance, to enable message
logging, which can be ideal to detect sporadic problems on a specific
server.</p>

<p>Other settings like Performance counters can also be enabled through
this WMI model, but it requires some programming since it can not easily
done with tools like this one.</p>

<p>And finally, Powershell scripts can also be used to query information
about the objects published by the built-in WMI provider.</p>

<p>PS C:\Users\pci> get-wmiobject -class &ldquo;AppDomainInfo&rdquo; -namespace
&ldquo;root\servicemodel&rdquo; -computername &ldquo;.&rdquo;</p>

<p>__GENUS : 2\
__CLASS : AppDomainInfo\
__SUPERCLASS :\
__DYNASTY : AppDomainInfo\
__RELPATH :
AppDomainInfo.AppDomainId=2,Name=&ldquo;b576ed9b-1-128279485591533267&rdquo;,ProcessId=2184\
__PROPERTY_COUNT : 12\
__DERIVATION : {}\
__SERVER : PCI-MOBILE\
__NAMESPACE : root\servicemodel\
__PATH :
&#92;PCI-MOBILE\root\servicemodel:AppDomainInfo.AppDomainId=2,Name=&ldquo;b576ed9b-1-128279485591\
533267&rdquo;,ProcessId=2184\
AppDomainId : 2\
IsDefault : False\
LogMalformedMessages : False\
LogMessagesAtServiceLevel : False\
LogMessagesAtTransportLevel : False\
MessageLoggingTraceListeners :\
Name : b576ed9b-1-128279485591533267\
PerformanceCounters : Off\
ProcessId : 2184\
ServiceConfigPath : C:\Projects\Service WMI\service\web.config\
ServiceModelTraceListeners : {xml}\
TraceLevel : Information</p>

<p> </p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/21/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/19/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/13/coordinating-async-work-in-node-dot-js/">Coordinating Async Work in Node.js</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/27/oauth-bridge-for-adfs-with-thinkteckture-authorization-server/">OAuth Bridge for ADFS With ThinkTecture Authorization Server</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/22/automatic-client-cert-detection-in-adfs-2-dot-0/">Automatic Client Cert Detection in ADFS 2.0</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/21/injecting-dynamic-content-in-windows-azure-package/">Injecting Dynamic Content in Windows Azure Packages</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/01/full-text-searches-in-sql-azure-with-solr/">Full-Text Searches in SQL Azure With Solr</a>
      </li>
    
  </ul>
</section>
 <a href="http://feeds.feedburner.com/cibrax"><img src="http://feeds.feedburner.com/~fc/cibrax?bg=FF3300&amp;fg=000000&amp;anim=0" style="border:0" alt="" /></a>

 <script type="text/javascript" language="javascript" src="http://twittercounter.com/embed/?username=cibrax&style=white"></script>
<a href="https://mvp.microsoft.com/en-us/mvp/Pablo%20Cibraro-33800"><img src="/images/mvp.gif" border="0" /></a>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/pcibraro">@pcibraro</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pcibraro',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Cibrax -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'cibrax';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
